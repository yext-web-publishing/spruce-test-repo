"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const s=require("./index-jMWSL4rm.cjs"),p=require("react"),R=require("react-dom");function E(){return s.getRuntime().name!=="browser"||window.hasOwnProperty("debuggerInitialized")?null:(window.debuggerInitialized=!0,R.createPortal(s.jsxRuntimeExports.jsx(w,{}),document.body))}const b={};function w(){const[t,o]=p.useState(),[i,n]=p.useState([]),[l,a]=p.useState(!1),e=r=>{o(t===r?void 0:r)};return p.useEffect(()=>(document.documentElement.classList.add("xYextDebug"),document.querySelectorAll("[data-ya-scope]").forEach(c=>{const u=c.dataset.yaScope,d=c.querySelectorAll("[data-ya-track]");d.forEach((x,m)=>{const g=x.dataset.yaTrack;x.addEventListener("mouseenter",()=>{n([{eventEl:x,eventName:`${u}_${g}`,key:`${u}_${g}_${m}`}])}),x.addEventListener("mouseleave",()=>{n([])})}),u&&(b.hasOwnProperty(u)?b[u].events=[...b[u].events,...Array.from(d)]:b[u]={scope:c,events:Array.from(d)})}),a(!0),()=>{document.documentElement.classList.remove("xYextDebug")}),[]),l?s.jsxRuntimeExports.jsxs(s.jsxRuntimeExports.Fragment,{children:[s.jsxRuntimeExports.jsxs("div",{className:"analytics-debugger",children:[s.jsxRuntimeExports.jsxs("div",{className:"analytics-debugger-toggles",children:[s.jsxRuntimeExports.jsx("button",{className:s.c("analytics-debugger-toggle",{"is-active":t==="Events"}),onClick:()=>e("Events"),children:"Events"}),s.jsxRuntimeExports.jsx("button",{className:s.c("analytics-debugger-toggle",{"is-active":t==="Scopes"}),onClick:()=>e("Scopes"),children:"Scopes"})]}),t&&s.jsxRuntimeExports.jsx("div",{className:"analytics-debugger-tabs",children:t==="Events"?s.jsxRuntimeExports.jsx(k,{data:b,setTooltips:n}):s.jsxRuntimeExports.jsx($,{data:b,setTooltips:n})})]}),s.jsxRuntimeExports.jsx(T,{tooltips:i})]}):null}function k(t){const{data:o,setTooltips:i}=t,[n,l]=p.useState(),[a,e]=p.useState(""),r=(c,u,d)=>{c.scrollIntoView({behavior:"smooth",block:"nearest"}),n&&n.classList.remove("analytics-event-highlight"),l(c),c.classList.add("analytics-event-highlight"),e(d),i([{eventEl:c,eventName:u,key:d}])};return s.jsxRuntimeExports.jsxs("div",{className:"analytics-debugger-tab",children:[s.jsxRuntimeExports.jsx("h2",{className:"analytics-debugger-tab-title",children:"Event Names"}),s.jsxRuntimeExports.jsx("ul",{className:"analytics-debugger-list",children:Object.entries(o).map(([c,u])=>u.events.map((d,x)=>{const m=`${c}_${d.dataset.yaTrack}`,g=`${m}_${x}`;return s.jsxRuntimeExports.jsx("li",{className:"analytics-debugger-listItem",children:s.jsxRuntimeExports.jsx("button",{className:s.c("analytics-debugger-button",{"is-active":g===a}),onClick:()=>r(d,m,g),children:m})},g)}))})]})}function $(t){const{data:o,setTooltips:i}=t,[n,l]=p.useState(""),a=e=>{const r=o[e];r.scope.scrollIntoView({behavior:"smooth",block:"nearest"}),l(e),i(r.events.map((c,u)=>({eventEl:c,eventName:`${e}_${c.dataset.yaTrack}`,key:`${e}_${c.dataset.yaTrack}_${u}`})))};return s.jsxRuntimeExports.jsxs("div",{className:"analytics-debugger-tab",children:[s.jsxRuntimeExports.jsx("h2",{className:"analytics-debugger-tab-title",children:"Scope Names"}),s.jsxRuntimeExports.jsx("ul",{className:"analytics-debugger-list",children:Object.keys(o).map((e,r)=>s.jsxRuntimeExports.jsx("li",{className:"analytics-debugger-listItem",children:s.jsxRuntimeExports.jsx("button",{className:s.c("analytics-debugger-button",{"is-active":e===n}),onClick:()=>a(e),children:e})},e+r))})]})}function T(t){const o=p.useRef({});return p.useEffect(()=>{if(o.current)for(const i of Object.values(o.current)){const n=Object.values(o.current).map(l=>l.el).filter(l=>l!==i.el);B(i,n),i.el.style.visibility="visible"}},[t.tooltips]),s.jsxRuntimeExports.jsx(s.jsxRuntimeExports.Fragment,{children:t.tooltips.map(i=>s.jsxRuntimeExports.jsx("div",{style:{visibility:"hidden"},className:"analytics-debugger-tooltip",ref:n=>{n?o.current[i.key]={el:n,tooltip:i}:delete o.current[i.key]},children:s.jsxRuntimeExports.jsx("span",{children:i.eventName})},i.key))})}function B(t,o){for(let i=0;i<9;i++){const n=N(t.tooltip.eventEl.getBoundingClientRect(),t.el,i);if(t.el.style.inset=`${n.top} auto auto ${n.left}`,!!C(t.el.getBoundingClientRect().left,t.el.getBoundingClientRect().top+window.scrollY,t.el.getBoundingClientRect().right,t.el.getBoundingClientRect().bottom+window.scrollY))continue;let a=!0;for(let e=0;e<o.length;e++){const r=o[e];S(t.el,r)&&(a=!1)}if(a)break}}function S(t,o){const i=t.getBoundingClientRect().top+window.scrollY,n=t.getBoundingClientRect().left,l=i+t.clientHeight,a=n+t.clientWidth,e=o.getBoundingClientRect().top+window.scrollY,r=o.getBoundingClientRect().left,c=e+o.clientHeight,u=r+o.clientWidth,d=(x,m,g,h,j,f,v,y)=>g<=j&&j<=v&&h<=f&&f<=y||g<=x&&x<=v&&h<=m&&m<=y||g<=x&&x<=v&&h<=f&&f<=y||g<=j&&j<=v&&h<=m&&m<=y;return d(n,i,r,e,a,l,u,c)||d(r,e,n,i,u,c,a,l)}function C(t,o,i,n){return t<0||i>window.innerWidth||o<0||n>document.documentElement.scrollHeight}function N(t,o,i){const n=o.clientHeight,l=o.clientWidth;let a,e;switch(i){case 0:{e=window.scrollY+t.top-n+"px",a=t.left-l+"px";break}case 1:{e=window.scrollY+t.top-n+"px",a=t.left+"px";break}case 2:{e=window.scrollY+t.top-n+"px",a=t.right+"px";break}case 3:{e=window.scrollY+t.top-n+"px",a=t.right-l+"px";break}case 4:{e=window.scrollY+t.bottom+"px",a=t.left-l+"px";break}case 5:{e=window.scrollY+t.bottom+"px",a=t.left+"px";break}case 6:{e=window.scrollY+t.bottom+"px",a=t.right-l+"px";break}case 7:{e=window.scrollY+t.bottom+"px",a=t.right+"px";break}default:e=0,a=0}return{top:e,left:a}}exports.AnalyticsDebuggerInternal=w;exports.default=E;
