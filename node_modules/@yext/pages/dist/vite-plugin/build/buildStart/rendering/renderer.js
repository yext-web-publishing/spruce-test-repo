import { ProjectStructure } from "../../../../common/src/project/structure.js";
import {
  generateTemplateResponses,
  getPluginRenderTemplates,
  readTemplateModules
} from "./templateUtils.js";
import {
  generateRedirectResponses,
  readRedirectModules
} from "./redirectUtils.js";
var renderer_default = async (props, manifest) => {
  const projectStructure = new ProjectStructure(manifest.projectStructure);
  const feature = props.document.__.name;
  const template = await readTemplateModules(
    feature,
    manifest,
    projectStructure
  );
  if (template) {
    const pluginRenderTemplates = await getPluginRenderTemplates(
      manifest,
      projectStructure
    );
    return await generateTemplateResponses(
      template,
      props,
      pluginRenderTemplates,
      manifest,
      projectStructure
    );
  }
  const redirect = await readRedirectModules(
    feature,
    manifest,
    projectStructure
  );
  if (redirect) {
    return await generateRedirectResponses(redirect, props);
  }
  throw new Error(`Could not find path for feature ${feature}`);
};
export {
  renderer_default as default
};
