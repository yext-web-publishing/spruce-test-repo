import { convertToPosixPath } from "../template/paths.js";
const getHydrationModuleDev = (clientRenderModulePath, modulePath) => {
  let hydrationTemplate = `
  import {default as Component} from "${convertToPosixPath(modulePath)}";
  `;
  hydrationTemplate += `
    import {render} from "${convertToPosixPath(clientRenderModulePath)}";
    render(
    {
        Page: Component,
    }
    );
  `;
  return hydrationTemplate;
};
const getIndexModuleDev = (clientHydrationString, indexHtml) => {
  return getCommonInjectedIndexHtml(clientHydrationString, indexHtml);
};
const getCommonInjectedIndexHtml = (clientHydrationString, indexHtml) => {
  indexHtml = injectIntoEndOfHead(
    indexHtml,
    `<script type="module">${clientHydrationString}</script>`
  );
  return indexHtml;
};
const injectIntoEndOfHead = (html, stringToInject) => {
  const closingHeadIndex = html.indexOf("</head>");
  if (closingHeadIndex === -1) {
    throw new Error("_server.tsx: No head tag is defined");
  }
  return html.slice(0, closingHeadIndex) + stringToInject + html.slice(closingHeadIndex);
};
export {
  getHydrationModuleDev,
  getIndexModuleDev
};
