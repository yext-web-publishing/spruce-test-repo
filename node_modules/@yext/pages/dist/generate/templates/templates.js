import { ProjectStructure } from "../../common/src/project/structure.js";
import { getTemplateFilepaths } from "../../common/src/template/internal/getTemplateFilepaths.js";
import { createTemplatesJson } from "./createTemplatesJson.js";
import { getRedirectFilePaths } from "../../common/src/redirect/internal/getRedirectFilepaths.js";
const templatesHandler = async ({
  scope
}) => {
  const projectStructure = await ProjectStructure.init({ scope });
  const templateFilepaths = getTemplateFilepaths(
    projectStructure.getTemplatePaths()
  );
  const redirectFilepaths = getRedirectFilePaths(
    projectStructure.getRedirectPaths()
  );
  await createTemplatesJson(
    templateFilepaths,
    redirectFilepaths,
    projectStructure,
    "TEMPLATES"
  );
};
const templatesCommand = (program) => {
  program.command("templates").description("Generates templates.json file").option(
    "--scope <string>",
    "The subfolder to scope the served templates from"
  ).action(templatesHandler);
};
export {
  templatesCommand,
  templatesHandler
};
